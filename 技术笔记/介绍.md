1. 面试官你好，我叫张家铭，本科和研究生都就读于杭州电子科技大学，目前在北京猿力未来科技有限公司担任前端工程师的工作，从事的主要工作是开发和维护客户端h5页面，针对不同机型进行自适配兼容，来完成各类需求，主要的技术栈是vue全家桶。此外在研究生期间，我的研究方向是数据可视化，发表了2篇sci论文，对d3也有一定的了解，除了前端之外，我对python和node也有一定的了解，曾经通过爬虫写过一个自动化交易脚本，现在也在维护和使用。

2. 开发的背景：因为双减政策，公司需要创造营收，所以开发了会员体系，我主要负责的是会员专区页、购买页以及整个购买流程还有其他一些功能组件的开发。
3. 碰见的问题：
   1. 如何提高代码的复用性和可维护性，来更好的去面对接下来可能存在的需求
   2. 如何写出更好的代码
   3. 兜底方案
4. 具体行动：
   1. 开发时注意模块化与组件化的应用
      1. 根据需求，封装一些与业务逻辑无关的，但是很多地方都能用到的基础组件，我自己开发了navbar、bottombar、userinfo、lottie组件、弹窗组件、loading组件等。
      2. 开发与当前业务相关的业务逻辑组件，比如会员权益模块、会员套餐模块、会员服务模块、以及其他功能模块。将对应的专区页由各个不同的模块组成，这样做对于后来各个功能模块的排序修改，有很大的好处。
      3. 尽量将通用组件内部的事件抛出来，在外层进行处理，组件内部不涉及逻辑处理，只涉及基础事件
      4. 合理的使用插槽和混入
         1. 为了增加组件的通用性，一定会使用插槽嘛
         2. 其次在本次项目中，比较麻烦的就是购买逻辑的一套流程，涉及到ios与android的下单逻辑、支付逻辑，这两部分逻辑在很多页面都会用到，因为在很多页面都可以直接购买会员，所以我讲这部分进行抽离，然后在需要的地方使用混入，来提高代码的复用性
   2. 在优化方面
      1. 首先就是路由的懒加载，把不同路由对应的组件分割成不同的代码块，然后当路由被访问的时候才加载对应组件
      2. 时机问题，首先就是数据请求，将数据请求的时机提前，不要等到使用的时候再去请求，用户体验不好，其次，还有一个就是我们有一个双十一促销的活动，需要生成端外分享图，将分享图的绘制时间提前，而不是用户点击分享之后再去绘制
      3. 尽量减少发送请求
      4. 有一个需求是头部的button消失之后显示底部的button，首先使用的intersectionobserver来实现，如果用户的手机不支持的话，使用了节流加监听scroll的兜底方案

5. 亮点与难点
   1. button的实现
   2. canvas 1px
   3. 购买逻辑使用了策略模式，使用同一的方法调用购买，通过不同的参数区分Android和IOS，然后不同的客户端走不同的逻辑策略，代替if-else
   4. 装饰器模式，mock数据使用了装饰器模式，研究一下mock原理
   5. 适配器模式：webview应该就是适配器模式
   6. 打点问题
      1. 背景：由于打点需求，需要客户端同学将打点需要的数据携带在url当中，客户端同学最开始想的是，在每个页面mounted的阶段，调用一个方法正则或者this.$route在url中获取一次，然后保存在store当中，然后让其他页面获取，但是一个问题就是客户端跳转前端页面，并不是固定在一个页面，而是有很多前端页面，那么就需要在所有页面的mounted阶段都添加这个方法，改动太大
      2. 解决方法;
         1. store本质上就是一个对象，在new Vue的时候被初始化，那么无论客户端跳转到哪个页面，store都会被初始化，那么只需要在store初始化的时候，通过正则匹配，拿到对应的打点数据，在初始化的时候就存到store里边，就不需要在每个页面添加方法了，只需要在store里边添加即可
         2. 第二种方法，使用路由使用，在进入页面之前或触发路由守卫，在路由守卫里边拿到query里边的数据，然后调用store.commit提交一下也可以解决
   7. 兼容性考虑
      1. 刘海屏：
         1. ios与安卓的刘海屏是通过webview来获取手机状态栏的高度，来解决的
      2. 安全区域：
         1. ios是用的safe-area-inset解决的
         2. 安卓没有这个问题，因为安卓的视口自动将下边的横杠排除了
   8. 帮客户端打点优化：
      1. 最开始的方案，通过watch来监听由父组件传过来的visible的变化，以此来进行打点
      2. 后来优化成了直接在mounted和destoryed里边打点，因为v-if会触发组件的挂载和destroy
   9. new Date在ios上返回 invalid Date，在ios里不支持 '-' 连接的日期，所以为了兼容ios，将日期转换为 '/' 连接的。
      1. var d = new Date("2017-08-11 12:00:00".replace(/-/g, "/"));
6. HR
   1. 最大的挫折：论文，几篇几十篇找个一个idea到自己这边不能用，再重新找
   2. 优点：坚持，无论是羽毛球还是论文
   3. 缺点：容易急，钻牛角尖，有时候在一些细节上边，对整个项目可能没什么帮助，但是我总是想把他搞明白，还有些问题可能当时不行，休息一下换个思路可能就想通了，但是一直在那钻牛角尖
   .

